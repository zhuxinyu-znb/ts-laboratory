(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1403:function(e,t,n){},1457:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(3);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.selectedKey,o=void 0===i?"selectedProps":i,s=n.dropedKey,r=void 0===s?"dropedProps":s;return Object.keys(e).reduce(function(n,i){var s=t.includes(i)?o:r;return Object.assign({},n,Object(a.a)({},s,Object.assign({},n[s],Object(a.a)({},i,e[i]))))},{})}},1630:function(e,t){e.exports={attributes:{width:"72px",height:"58px",viewBox:"0 0 72 58"},content:'<defs>         <path d="M0.00434937116,11.7604183 C0.0014585125,11.8367351 0,11.9134174 0,11.9904392 L0,52.0095608 C0,55.3137533 2.68603825,58 5.99943435,58 L66.0005656,58 C69.3089213,58 72,55.317989 72,52.0095608 L72,11.9904392 C72,8.68624675 69.3139617,6 66.0005656,6 L31.1520961,6 L30.2346555,3.7077864 C29.4154984,1.66113281 26.9585394,0 24.7478675,0 L6.18638069,0 C2.86742525,0 0.139552484,2.68348852 0.0902454792,5.99373937 L0.00434937116,11.7604183 Z" id="path-1"></path>         <mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="72" height="58" fill="white">             <use xlink:href="#path-1"></use>         </mask>     </defs>     <g id="空状态" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">         <g id="collection" transform="translate(-39.000000, -30.000000)" stroke="#E7EAF1">             <g transform="translate(39.000000, 30.000000)" id="Group-7">                 <g>                     <use id="Combined-Shape" mask="url(#mask-2)" stroke-width="6" xlink:href="#path-1"></use>                     <path d="M36.4126782,38.4800003 L30.2669271,41.2927815 C29.7656337,41.522213 29.4096881,41.2718295 29.4738593,40.716584 L30.2498317,34.0024302 L25.6755762,29.0266708 C25.3024658,28.6208107 25.4306014,28.2049135 25.9785012,28.0943637 L32.6038296,26.7575697 L35.9225353,20.8696 C36.1932338,20.3893332 36.6283715,20.3826781 36.9028211,20.8696 L40.2215268,26.7575697 L46.8468552,28.0943637 C47.3872665,28.2034026 47.5280608,28.6151866 47.1497802,29.0266708 L42.5755247,34.0024302 L43.3514971,40.716584 C43.4147912,41.2642406 43.0666691,41.5253922 42.5584293,41.2927815 L36.4126782,38.4800003 Z" id="Star" stroke-width="3"></path>                 </g>             </g>         </g>     </g>'}},1631:function(e,t,n){},1632:function(e,t,n){},1633:function(e,t,n){},1634:function(e,t,n){},1635:function(e,t,n){},1636:function(e,t,n){},1637:function(e,t,n){},1638:function(e,t,n){},1639:function(e,t,n){},1654:function(e,t,n){"use strict";var a=n(58);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(1)),o=a(n(71)),s=function(e){return i.default.createElement(o.default,Object.assign({width:"14",height:"16",viewBox:"0 0 18 18"},e),i.default.createElement("path",{fill:"#9FADC7",d:"M18 9h-5.5c-1.37 0-2.5 1.12-2.5 2.5 0 1.39 1.12 2.5 2.5 2.5H18v1.997A1.999 1.999 0 0 1 16.005 18H1.995A1.997 1.997 0 0 1 0 15.997V7.003C0 5.897.893 5 1.995 5h14.01C17.107 5 18 5.894 18 7.003V9zM4 4c.872-.374 1.696-.735 2.472-1.083.678-.294 1.35-.588 2.01-.882.663-.294 1.18-.52 1.55-.682.567-.254 1.072-.37 1.516-.35.444.02.765.03 1.126.19.36.16.703.633.857.793L15 4H4zm8.5 9a1.5 1.5 0 1 1 .001-3.001A1.5 1.5 0 0 1 12.5 13z",fillRule:"evenodd"}))};t.default=s},1655:function(e,t,n){"use strict";var a=n(58);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(1)),o=a(n(71)),s=function(e){return i.default.createElement(o.default,Object.assign({width:"14",height:"16",viewBox:"0 0 18 18"},e),i.default.createElement("path",{fill:"#0C2",d:"M6.276 12.186a.6.6 0 0 1-.523-.31l-.04-.086-1.638-3.622a.301.301 0 0 1 .452-.369L6.46 9.185a.887.887 0 0 0 .8.092L16.35 5.2C14.722 3.265 12.038 2 9 2 4.03 2 0 5.383 0 9.556c0 2.277 1.212 4.326 3.11 5.712a.608.608 0 0 1 .22.685l-.406 1.524c-.02.07-.048.146-.048.22a.3.3 0 0 0 .3.303.335.335 0 0 0 .173-.056l1.97-1.146a.888.888 0 0 1 .742-.1c.92.266 1.91.414 2.938.414 4.97 0 9-3.383 9-7.556a6.573 6.573 0 0 0-1.025-3.5L6.612 12.08l-.066.04a.604.604 0 0 1-.27.064z",fillRule:"evenodd"}))};t.default=s},1656:function(e,t,n){},1657:function(e,t,n){},1658:function(e,t,n){},1659:function(e,t,n){},1676:function(e,t,n){"use strict";n.r(t);var a=n(4),i=n(8),o=n(7),s=n(5),r=n(6),c=n(0),l=n(1),u=n.n(l),d=n(9),p=n.n(d),b=n(63),m=n.n(b),h=n(11);n(1403);var f=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).rootRef=u.a.createRef(),n.unobserve=m.a,n.renderTarget=function(){var e=n.props.item,t=e.content.target,a=t.text,i=t.link,o=e.id,s=e.target,r=e.target,l=(r=void 0===r?{}:r).id,u=r.target,d=void 0===u?{}:u,p=d.type;return s&&"comment"===s.type?n.renderCommentButton(a,{type:p,href:i,byComment:l,target:d,notificationId:o}):Object(c.b)("span",null,i?Object(c.b)("a",{href:i,"data-za-detail-view-id":5109},a):Object(c.b)("span",null,a))},n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.addObserve,n=e.item.attachInfo,a=this.rootRef.current;h.a.setModule(a,{module:"Content"},{attached_info_bytes:n}),this.unobserve=t(a)}},{key:"componentWillUnmount",value:function(){this.unobserve()}},{key:"renderCommentButton",value:function(e,t){var n=this,a=t.href,i=t.byComment,o=t.notificationId;return Object(c.b)("a",{href:"".concat(a).concat(i?"#comment-".concat(i,"?notificationId=").concat(o):""),"data-za-detail-view-id":5109,onClick:function(e){e.preventDefault(),n.props.onCommentsModalOpen(t)}},e)}},{key:"render",value:function(){var e,t=this.props.item,n=t.content,a=n.verb,i=n.actors,o=t.isRead;return Object(c.b)("div",{ref:this.rootRef,className:p()("PushNotifications-item",{"PushNotifications-newItem":!o})},Object(c.b)("span",null,(e=i,Array.isArray(e)||(e=[e]),e.map(function(e,t){return Object(c.b)("span",{className:"PushNotifications-actor",key:t},e.link?Object(c.b)("a",{href:e.link,"data-za-detail-view-id":5109},e.name):Object(c.b)("span",null,e.name))})))," ",a," ",this.renderTarget())}}]),t}(l.Component);t.default=f},1678:function(e,t,n){"use strict";n.r(t),n.d(t,"ReportModal",function(){return de});var a,i,o=n(15),s=n(22),r=n(3),c=n(4),l=n(8),u=n(7),d=n(5),p=n(6),b=n(0),m=n(2),h=n.n(m),f=n(1),v=n.n(f),j=n(11),O=n(41),y=n(9),g=n.n(y),C=n(702),k=n(10),w=n(34),R=(n(1632),"oneself"),N="enterprise",I={declare:{title:"发表澄清声明",image:"https://zhstatic.zhihu.com/assets/report/Statement@3x.png",description:(a={},Object(r.a)(a,R,"个人可以对站内关于自身的不实描述内容发表澄清声明，声明通过审核后，将会以标记的形式显示在投诉内容的上方，点击可跳转至您的声明全文页面"),Object(r.a)(a,N,"企业可以对站内关于自身的不实描述内容发表澄清声明，声明通过审核后，将会以标记的形式显示在投诉内容的上方，点击可跳转至您的声明全文页面"),a)},trespass:{title:"提交侵权举报",image:"https://zhstatic.zhihu.com/assets/report/Infringement@3x.png",description:Object(b.b)("span",null,"您提交的侵权举报将会根据知乎侵权举报规范进行受理")}},S=(i={},Object(r.a)(i,N,"当您发现知乎上存在涉嫌侵犯您企业合法权益的内容时，您可以先尝试与作者沟通解决，如沟通无效，也可以通过以下方式向知乎提出诉求。"),Object(r.a)(i,R,"当您发现知乎上存在涉嫌侵犯您个人合法权益的内容时，您可以通过以下方式向知乎提出诉求。"),i),P=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).handleClick=function(e){j.a.trackEvent(e,{id:3467,aciton:"Click"})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){j.a.trackCardShow(null,{id:3466})}},{key:"render",value:function(){var e=this,t=this.props,n=t.onSubMenuEnter,a=t.onBackClick,i=t.isMobile,o=t.childNodes,s=t.activeNode.reason,r=o.map(function(e){return Object.assign({},I[e.reason],{id:e.id})});return Object(b.b)("section",{className:g()("ReportInfringement",{"ReportInfringement--mobile":i})},Object(b.b)("p",{className:"ReportInfringement-subtitle"},S[s]),Object(b.b)("ul",{className:"ReportInfringement-list"},r.map(function(t){var a=t.image,i=t.title,o=t.description,r=t.id,c=o[s]||o;return Object(b.b)("li",{className:"ReportInfringement-item",key:i,"data-za-module":"Content","data-za-detail-view-path-module_name":i,onClick:function(t){e.handleClick(t.currentTarget),n(r)}},Object(b.b)("img",{className:"ReportInfringement-image",src:a}),Object(b.b)("div",{className:"ReportInfringement-content"},Object(b.b)("h1",{className:"ReportInfringement-itemTitle"},i),Object(b.b)("p",{className:"ReportInfringement-itemDescription"},c)),Object(b.b)(C.a,{className:"ReportInfringement-arrow"}))})),Object(b.b)(w.a,{direction:"horizontal"},Object(b.b)(k.c,{"data-za-module":"Content","data-za-detail-path-view-module_name":"返回",onClick:function(t){e.handleClick(t.currentTarget),a()}},"返回")))}}]),t}(v.a.Component),T=n(46),x=function(e){return"https://www.zhihu.com/account/infringement?".concat(Object(T.stringify)(e))};n(1633);function F(e){var t=e.infringementType;return Object(b.b)("p",{className:"ReportOrgContent"},"若您已注册机构号，可使用",Object(b.b)("span",{className:"ReportOrgContent-highlight"},"机构号"),"declare"===t?"发表澄清声明":"提交侵权举报","，",Object(b.b)("span",{className:"ReportOrgContent-highlight"},"免提交资质材料"),"。")}var z=n(36),M=function(e){return"".concat(window.location.origin,"/appview/account/infringement?").concat(Object(T.stringify)(e))};n(1634);function D(e){var t=e.isIndividualReason,n=e.onBackClick,a=e.urlToken,i=e.type;return Object(b.b)("div",{className:"InfringementReport-wrapper"},Object(b.b)("div",{className:"InfringementReport-title"},"提交侵权举报"),Object(b.b)("div",{className:"InfringementReport-subTitle"},"".concat(t?"个人侵权":"企业侵权")),Object(b.b)("div",{className:"InfringementReport-text"},Object(b.b)("ul",null,Object(b.b)("li",null,"根据"," ",Object(b.b)("a",{href:"https://www.zhihu.com/terms#sec-report",rel:"noopener noreferrer",target:"_blank",className:"InfringementReport-rules"},"知乎侵权举报规范"),"，您需按照提示提供完整、有效的证明材料，并规范填写投诉说明。若您已确认完毕，请继续提交举报信息。"),!t&&Object(b.b)("li",null,Object(b.b)("br",null),"若您已注册机构号，可使用",Object(b.b)("span",null,"机构号"),"提交侵权举报，",Object(b.b)("span",null,"免提交资质材料"),"。"))),Object(b.b)("div",{className:"InfringementReport-buttonGroup"},Object(b.b)(k.c,{className:"InfringementReport-back",onClick:n},"返回"),Object(b.b)(k.c,{className:"InfringementReport-submit",onClick:function(){z.a.dispatch("base/openURL",{url:M({resourceId:a,type:i,reasonType:t?"inflictIndividual":"enterprise",route_simi_to_full:!0,zh_nav_right:"empty"})})}},"继续提交举报")))}n(1635);function L(e){var t=e.infringementType,n=e.isIndividualReason,a=e.onBackClick,i=e.urlToken,o=e.type,s="declare"===t;return Object(b.b)("div",null,s?Object(b.b)("div",{className:"ReportInfringementMobile"},Object(b.b)("p",{className:"ReportInfringementMobile-text"},"1."," ","".concat(n?"个人":"企业","可以对站内关于自身的不实描述内容发表澄清声明，声明通过审核后，将会以标记的方式形式显示在投诉内容的上方，点击可跳转至您的声明全文。")),Object(b.b)("p",{className:"ReportInfringementMobile-text"},"2. 根据",Object(b.b)("a",{className:"ReportInfringementMobile-link",href:"https://www.zhihu.com/terms#sec-report",target:"_blank",rel:"noopener noreferrer"},"知乎侵权举报规范"),"，您需按照提示提供完整、有效的证明材料， 以发表澄清声明。 若您已确认完毕，",Object(b.b)("span",{className:"ReportInfringementMobile-bold"},"请到桌面版网页进行诉求提交。")),!n&&Object(b.b)("p",{className:"ReportInfringementMobile-text"},"若您已注册机构号，可使用机构号\n              '发表澄清声明' ，免提交资质材料。"),Object(b.b)("img",{className:"ReportInfringementMobile-img",src:"https://zhstatic.zhihu.com/report/app_report.png"}),Object(b.b)(k.c,{color:k.a.Blue,preset:k.b.Primary,onClick:a,className:"ReportInfringementMobile-button"},"我知道了")):Object(b.b)(D,{infringementType:t,isIndividualReason:n,onBackClick:a,urlToken:i,type:o}))}n(1636);var q=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).handleClick=function(e){j.a.trackEvent(null,{id:3469,action:"Click"},{button:{text:e}})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){j.a.trackCardShow(null,{id:3468})}},{key:"render",value:function(){var e=this,t=this.props,n=t.onBackClick,a=t.urlToken,i=t.type,o=t.isMobile,s=!("enterprise"===t.parentNode.reason);return o?Object(b.b)(L,{isIndividualReason:s,infringementType:"declare",onBackClick:n,type:i,urlToken:a}):Object(b.b)("section",{className:"ReportDeclare"},Object(b.b)("div",{className:"ReportDeclare-description"},"当您发现知乎上有关于您",s?"个人":"企业","的侵权内容时，您可通过此方式发表澄清声明。",Object(b.b)("br",null),Object(b.b)("br",null),"申请发表澄清声明的流程如下：",Object(b.b)("ul",null,Object(b.b)("li",null,"1. 在站内写一篇",Object(b.b)("a",{href:"https://zhuanlan.zhihu.com/write",target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick("澄清声明文章")}},"澄清声明文章"),"并发布。",Object(b.b)("a",{href:"https://zhstatic.zhihu.com/assets/report/template-v2.png",target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick("查看模版")}},"查看模版"),Object(b.b)("br",null)),Object(b.b)("li",null,"2.返回此页面继续发表声明，您需按照提示提供完整、有效的证明材料。",Object(b.b)("br",null)),Object(b.b)("li",null,"3.审核通过后，侵权纠纷内容上会关联展示您的澄清声明，点击可跳转至您的声明全文。")),!s&&Object(b.b)(F,{infringementType:"declare"})),Object(b.b)(w.a,{direction:"horizontal"},Object(b.b)(k.c,{onClick:n},"返回"),Object(b.b)(k.c,{onClick:function(){return e.handleClick("继续发表声明")},component:"a",href:x({infringementType:"declare",resourceId:a,type:i,reasonType:s?"inflictIndividual":"enterprise"}),className:"ReportDeclare-continue",color:k.a.Blue,preset:k.b.Primary},"继续发表声明")))}}]),t}(v.a.Component),E=(n(1637),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).handleClick=function(e){j.a.trackEvent(null,{id:3510,aciton:"Click"},{button:{text:e}})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){j.a.trackCardShow(null,{id:3509})}},{key:"render",value:function(){var e=this,t=this.props,n=t.onBackClick,a=t.urlToken,i=t.type,o=t.isMobile,s=!("enterprise"===t.parentNode.reason);return o?Object(b.b)(L,{isIndividualReason:s,infringementType:"trespass",onBackClick:n,urlToken:a,type:i}):Object(b.b)("section",{className:"ReportTrespass"},Object(b.b)("p",{className:"ReportTrespass-description"},"根据",Object(b.b)("a",{href:"https://www.zhihu.com/terms#sec-report",onClick:function(){e.handleClick("知乎侵权举报规范")}},"知乎侵权举报规范"),"，您需按照提示提供完整、有效的证明材料，并规范填写投诉说明。若您已确认完毕，请继续提交举报信息。"),!s&&Object(b.b)(F,{infringementType:"trespass"}),Object(b.b)(w.a,{direction:"horizontal"},Object(b.b)(k.c,{onClick:function(){e.handleClick("返回"),n()}},"返回"),Object(b.b)(k.c,{onClick:function(){e.handleClick("继续提交举报")},component:"a",href:x({resourceId:a,type:i,reasonType:s?"inflictIndividual":"enterprise"}),className:"ReportTrespass-continue",color:k.a.Blue,preset:k.b.Primary},"继续提交举报")))}}]),t}(v.a.Component)),B=[{id:0,text:"举报",childIds:function(e){var t=e.showRepostOnTopLevel;return[1,2,39,30001,4,20,5,21,7,8,9].filter(function(e){return!!t||20!==e})}},{id:1,text:"低质问题",types:["question","drama_statement"],childIds:[23,33,34,35,27,22]},{id:2,text:"垃圾广告信息",reason:"spam",copywriter:{title:"举报说明",placeholder:"举报详细说明",isRequired:!1},disabled:!0,des:"未经平台允许，知乎禁止使用帐号的任何功能，发布含有产品售卖信息、牟利性外链及违规推广等信息或引导用户至第三方平台进行交易。请在举报时简述理由，感谢你与我们共同维护社区的良好氛围。",url:"https://zhuanlan.zhihu.com/p/96916639"},{id:30001,reason:"abuse",text:"辱骂、人身攻击等不友善行为",types:["question","answer","article","pin","comment","zvideo","drama_bullet","favlist","book_review","discussion_review"],copywriter:{title:"举报说明",placeholder:"举报详细说明",isRequired:["zvideo","drama_bullet","book_review","discussion_review"]},disabled:!0,des:"知乎鼓励友善的讨论。请在举报时提供对人产生辱骂、人身攻击或冒犯的相关内容段落或其他信息。感谢你与我们共同维护知乎的讨论氛围。",url:"https://www.zhihu.com/question/20239684"},{id:4,text:"有害信息",childIds:[19,30,26,18,28]},{id:5,text:"涉嫌侵权",childIds:function(e){var t=e.showRepostOnTopLevel;return[20,29,12].filter(function(e){return!t||20!==e})},types:["question","drama_statement","answer","comment","drama_bullet","article","pin","book_review","zvideo"],reason:"infringement",disabled:!0},{id:7,text:"其他",reason:"old",copywriter:{title:"举报说明",placeholder:"举报详细说明"},disabled:!0,types:["message","book_review","discussion_review","drama_statement","drama_bullet"]},{id:8,reason:"direction",shouldShow:function(e){return e.isColumnArticle}},{id:9,reason:"tipjar",shouldShow:function(e){return e.isTipjarEnabled}},{id:12,reason:"enterprise",disabled:!0,customComponent:P,childIds:[48,49]},{id:17,reason:"spam"},{id:18,reason:"illegality",copywriter:{title:"举报说明",placeholder:"举报详细说明"},disabled:!0},{id:19,reason:"politics"},{id:20,reason:"repost",copywriter:{title:"不规范转载说明",placeholder:"原文链接或补充说明",maxLength:1e3},types:["answer","article","pin","book_review"],disabled:!0,des:"知乎鼓励对引用内容进行清晰的出处标注。请在举报时提供违规引用的内容链接或出处，感谢你与我们共同保护原创版权。",url:"https://www.zhihu.com/question/20258015/answer/72942383"},{id:21,reason:"temptation",copywriter:{title:"举报说明",placeholder:"举报详细说明"},disabled:!0,types:["answer","comment","drama_bullet","article","column","zvideo"],des:"知乎禁止通过各种方式比如利益诱导（赞同、反对、分享行为后对用户有奖励）、威胁逼迫等形式干预用户在知乎站内的赞同、关注等，影响内容在站内正常流通。请在举报时简述理由，感谢你与我们共同维护社区氛围。",url:"https://zhuanlan.zhihu.com/p/96927876"},{id:22,reason:"personal"},{id:23,reason:"ambiguity"},{id:26,reason:"suicide",types:["question","drama_statement","answer","article","pin","book_review","comment","drama_bullet","zvideo"]},{id:27,reason:"medicine"},{id:28,reason:"superstition"},{id:29,reason:"oneself",disabled:!0,customComponent:P,childIds:[46,47]},{id:30,reason:"porn"},{id:33,reason:"subjective",copywriter:{title:"包含主观判断",placeholder:"举报详细说明",isRequired:["drama_statement"]},des:"问题中包含提问者无根据或非常主观甚至包含争议的见解、结论或推测。请在举报时简述理由，感谢你与我们共同维护社区的良好氛围。",url:"https://www.zhihu.com/question/19806261"},{id:34,reason:"rumour",copywriter:{title:"缺乏可信来源",placeholder:"举报详细说明",isRequired:["drama_statement"]},des:"未提供可靠的信息来源，或提问前提属于谣言 / 存在事实错误。请在举报时简述理由或补充来源，感谢你与我们共同维护社区的良好氛围。",url:"https://www.zhihu.com/question/19806261"},{id:35,reason:"provoke",copywriter:{title:"引战争议等非真实问题",placeholder:"举报详细说明",isRequired:["drama_statement"]},des:"刻意引起群体或个人之间的对立、冲突、激化矛盾的问题。请在举报时简述理由，感谢你与我们共同维护社区的良好氛围。",url:"https://www.zhihu.com/question/19806261"},{id:39,text:"不实信息",types:["answer","comment","drama_bullet","article","pin","book_review","zvideo"],childIds:[42,43,44,45]},{id:40,reason:"abuse"},{id:41,reason:"unfriendly",copywriter:{title:"不规范转载说明",placeholder:"原文链接或补充说明",maxLength:1e3},disabled:!0,des:"知乎鼓励对引用内容进行清晰的出处标注。请在举报时提供违规引用的内容链接或出处，感谢你与我们共同保护原创版权。",url:"https://www.zhihu.com/question/20258015/answer/72942383"},{id:42,reason:"untruth_science",text:"科学类不实信息",copywriter:{title:"举报说明",placeholder:"举报详细说明"},disabled:!0,des:"知乎鼓励专业的回答，请在举报时提供内容中与当前学术共识或权威研究结论相左的错误或不准确部分，或通过权威资讯指出其中错误，感谢你的支持。",url:"https://zhuanlan.zhihu.com/p/96929600"},{id:43,reason:"untruth_rumor",text:"社会谣言类不实信息",copywriter:{title:"举报说明",placeholder:"举报详细说明"},disabled:!0,des:"为保证站内信息传播的客观真实，知乎会持续对社会谣言类不实信息进行处理。请在举报时提供政府机构、有关机构、权威媒体发布的辟谣信息或其他佐证，知乎将会核实处理，感谢你的支持。"},{id:44,reason:"untruth_fake_profile",text:"编造经历类不实信息",copywriter:{title:"举报说明",placeholder:"举报详细说明"},disabled:!0,types:["answer","drama_bullet","pin","book_review"],des:"知乎禁止对标榜真实经历的内容进行恶意夸大或过分虚构的行为。请在举报时提供被举报内容中编造经历的佐证，如事实错误、前后矛盾等相关内容段落或其他详细信息。感谢你与我们共同维护知乎真实的内容环境。"},{id:45,text:"诽谤等侵权信息",childIds:[20,29,12],types:["answer","comment","drama_bullet","article","pin","book_review"]},{id:46,customComponent:q,text:"发表澄清声明",reason:"declare",types:["answer","article","pin"],subtitle:"个人侵权"},{id:47,customComponent:E,text:"提交侵权举报",reason:"trespass",subtitle:"个人侵权"},{id:48,customComponent:q,text:"发表澄清声明",reason:"declare",types:["answer","article","pin"],subtitle:"企业侵权"},{id:49,customComponent:E,text:"提交侵权举报",reason:"trespass",subtitle:"企业侵权"}],_=[{id:0,text:"举报",childIds:[1,2,3,4]},{id:1,text:"垃圾广告信息",reason:"spam",copywriter:{title:"垃圾广告信息",placeholder:"举报详细说明",isRequired:!1},disabled:!0,des:"未经平台允许，知乎禁止使用帐号的任何功能发布含有产品售卖信息、牟利性外链及违规推广等信息或引导用户至第三方平台进行交易。请在举报时简述理由，感谢你与我们共同维护社区的良好氛围。"},{id:2,text:"辱骂、人身攻击等不友善行为",reason:"unkind",copywriter:{title:"辱骂、人身攻击等不友善行为",placeholder:"举报详细说明",isRequired:!1},disabled:!0,des:"知乎鼓励友善的讨论。请在举报时提供对人产生辱骂、人身攻击或冒犯的相关内容段落或其他信息。感谢你与我们共同维护知乎的讨论氛围。"},{id:3,text:"有害信息",reason:"imitation",disabled:!0,childIds:[19,30,26,18,28]},{id:19,reason:"politics"},{id:28,reason:"superstition"},{id:30,reason:"porn"},{id:26,reason:"suicide",types:["question","drama_statement","answer","article","pin","book_review","comment","drama_bullet","zvideo"]},{id:18,reason:"illegality",copywriter:{title:"举报说明",placeholder:"举报详细说明"},disabled:!0}],A=[{id:0,text:"举报",childIds:[1,2,3]},{id:1,reason:"abuse",copywriter:{title:"举报说明",placeholder:"举报详细说明",isRequired:!1},disabled:!0,des:"知乎鼓励友善的讨论。请在举报时提供对人产生辱骂、人身攻击或冒犯的相关内容段落或其他信息。感谢你与我们共同维护知乎的讨论氛围。",url:"https://www.zhihu.com/question/20239684"},{id:2,reason:"harassment",copywriter:{title:"举报说明",placeholder:"举报详细说明",isRequired:!1},disabled:!0,des:"存在冒犯、威胁、性骚扰等骚扰行为。"},{id:3,reason:"spam",copywriter:{title:"举报说明",placeholder:"举报详细说明",isRequired:!1},disabled:!0,des:"未经平台允许，知乎禁止使用帐号的任何功能发布含有产品售卖信息、牟利性外链及违规推广等信息或引导用户至第三方平台进行交易。请在举报时简述理由，感谢你与我们共同维护社区的良好氛围。",url:"https://zhuanlan.zhihu.com/p/96916639"}],U=[{id:0,text:"举报",childIds:[1,4,6,7]},{id:1,text:"冒充我或他人",childIds:[8,9],reason:"fake",disabled:!0},{id:4,reason:"spam",text:"垃圾广告帐号",copywriter:{title:"垃圾广告帐号",placeholder:"举报详细说明",isRequired:!1},disabled:!0,des:"未经平台允许，知乎禁止使用帐号的任何功能发布含有产品售卖信息、牟利性外链及违规推广等信息或引导用户至第三方平台进行交易。请在举报时简述理由，感谢你与我们共同维护社区的良好氛围。",url:"https://zhuanlan.zhihu.com/p/96916639"},{id:6,reason:"profile",copywriter:{title:"举报说明",placeholder:"举报详细说明"},disabled:!0,des:"用户名、头像、封面图、个人形象词包含联系方式；或高风险行业帐号的用户信息中包含联系方式；或用户名易与帐号使用状态、使用者身份产生混淆和误解。请在举报时简述原因，感谢你的支持。",url:"https://www.zhihu.com/question/19551824"},{id:8,text:"冒充我",subtitle:"请选择举报理由",reason:"oneself",disabled:!0,childIds:[10,11]},{id:9,reason:"impersonate",copywriter:{title:"举报说明",placeholder:"举报详细说明"},text:"冒充他人",disabled:!0},{id:10,reason:"oneself",disabled:!0,isRequired:!0,customComponent:P,childIds:[12]},{id:11,reason:"enterprise",disabled:!0,isRequired:!0,customComponent:P,childIds:[13]},{id:12,isRequired:!0,customComponent:E,text:"提交侵权举报",reason:"trespass",subtitle:"个人侵权"},{id:13,isRequired:!0,customComponent:E,text:"提交侵权举报",reason:"trespass",subtitle:"企业侵权"}],W=[{id:0,text:"举报",childIds:[2,3,4,5,14,15,16,17,18,700]},{id:2,reason:"abuse",text:"骚扰/辱骂/歧视等不友善行为"},{id:3,reason:"illegality",text:"发过违反法律法规的内容"},{id:4,reason:"spam",text:"垃圾广告帐号"},{id:5,reason:"politics",text:"发过政治敏感内容"},{id:14,reason:"minor"},{id:15,reason:"porn"},{id:16,reason:"uncivilized_behavior"},{id:17,reason:"suicide",text:"疑似自杀或自残"},{id:18,reason:"superstition"},{id:700,reason:"old",text:"其他",copywriter:{title:"举报说明",placeholder:"举报详细说明"},disabled:!0}],K=[{id:0,text:"举报",childIds:[1]},{id:1,reason:"profile"}],V=n(14),G=n(32),H=n(59),Z=n.n(H),J=n(613),Q=n(302),$=n(1365),X=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).handleClick=e.handleClick.bind(Object(G.default)(e)),e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.id,n=e.reason,a=e.disabled,i=e.onSubMenuEnter,o=e.onItemSelect,s=e.copywriter;n&&void 0===(null==s?void 0:s.isRequired)&&!a?o(t):i(t)}},{key:"render",value:function(){var e=this.props,t=e.reason,n=e.text,a=e.disabled,i=e.isSelected,o=e.id,s=e.copywriter,r=n||Q.b[t];return Boolean(t&&!s&&!a)?Object(b.b)("label",{className:"ReportMenu-item",htmlFor:t},Object(b.b)("div",{className:"ReportMenu-itemValue needsclick"},r),Object(b.b)("input",{className:"ReportMenu-itemCheck",type:"radio",name:"report",value:o,id:t,checked:i,onChange:this.handleClick}),Object(b.b)($.a,{size:18,className:"ReportMenu-itemCheckIcon",name:"checkRound"})):Object(b.b)("button",{className:"ReportMenu-item",onClick:this.handleClick},Object(b.b)("span",{className:"ReportMenu-itemValue"},r),Object(b.b)(C.a,{size:18}))}}]),t}(f.Component);X.propTypes={id:h.a.number.isRequired,reason:h.a.string,text:h.a.string,disabled:h.a.bool,isSelected:h.a.bool,onSubMenuEnter:h.a.func.isRequired,onItemSelect:h.a.func.isRequired};var Y=n(61),ee=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.copywriter.placeholder,n=e.onDetailInput,a=e.errorText,i=e.checkCustomReasonContent,o=e.isCustomReasonRequired;return Object(b.b)("div",{className:"ReportMenu-inner"},Object(b.b)(Y.a,{multiline:!0,grey:!0,rows:5,className:"ReportMenu-textarea",placeholder:"".concat(t,o?"（必填）":"（选填）"),onChange:function(e){return n(e.target.value)},onBlur:i}),Object(b.b)("div",{className:"ReportMenu-errorText"},a))}}]),t}(f.Component);ee.propTypes={onDetailInput:h.a.func.isRequired,copywriter:h.a.object,errorText:h.a.string};n(1638);var te=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.checked,n=e.onChange,a=e.name,i=e.text,o=e.desc,s=a||i;return Object(b.b)("div",null,Object(b.b)("label",{className:"ReportOption-check",htmlFor:s},Object(b.b)("input",{type:"checkbox",name:s,checked:t,onChange:n}),Object(b.b)("span",null,"同时",i)),o&&Object(b.b)("div",{className:"ReportOption-desc"},o))}}]),t}(f.Component),ne=function(e,t){var n=t&&t.maxLength;return e.length>(n||150)?{isLegal:!1,errorReason:n?"".concat(t.title||"举报说明","不能超过 ").concat(n," 字"):Q.a.contentTooLong}:/[\u4e00-\u9fa5a-zA-Z0-9]/.test(e)?{isLegal:!0,errorReason:""}:{isLegal:!1,errorReason:Q.a.contentIllegal}},ae=(n(1639),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={blockChecked:!1,commentChecked:!1,activeId:0,parentId:null,selectedId:null,errorText:"",isMobile:!1,isSubmiting:!1,isSubmited:!1,path:[]},n.menuItems={},n.getChildIds=function(e){return"function"==typeof e?e(n.props):e},n.getReportText=function(e){if(!e)return"";var t=n.props.nodes[e];return t&&(t.text||Q.b[t.reason])||""},n.getReportLevel=function(){return"第 ".concat(n.state.path.length+1," 级")},n.handleItemSelect=function(e){var t=n.selectedId===e?null:e;n.setState({selectedId:t});var a=n.props,i=a.zaEnabled,o=a.type;t&&i&&j.a.trackEvent(null,{action:"Select",element:"Menu",id:2883,name:n.getReportLevel()},{button:{text:n.getReportText(e)},report:{id:e,type:o}})},n.handleSubMenuEnter=function(e){n.setState(function(t){var n=t.activeId,a=t.path;return{activeId:e,parentId:n,selectedId:null,path:a.concat([e])}});var t=n.props,a=t.zaEnabled,i=t.type;a&&j.a.trackEvent(null,{action:"Expand",element:"Menu",id:2883,name:n.getReportLevel()},{button:{text:n.getReportText(e)},report:{id:e,type:i}})},n.hasEffectOfDeleteComment=function(){var e=n.props.nodes,t=n.state,a=t.parentId,i=t.activeId,o=e[a||i];return Boolean(o&&o.effects)&&o.effects.includes("delete_comment")},n.handleDetailInput=function(e){n.setState({customReason:e,errorText:""})},n.handleBackClick=function(){var e=n.props.nodes,t=n.state,a=t.parentId,i=t.path,o=Object.keys(e).find(function(t){var i=n.getChildIds(e[t].childIds);return i&&i.includes(a)});n.setState({activeId:a,parentId:o&&Number(o),selectedId:null,hasWarning:!1,customReason:"",errorText:"",path:i.slice(0,-1)});var s=n.props,r=s.zaEnabled,c=s.type;r&&j.a.trackEvent(null,{action:"Back",element:"Button",id:2884,name:n.getReportLevel()},{report:{id:n.state.activeId,type:c}})},n.handleSubmit=function(){var e=n.state,t=e.selectedId,a=e.customReason,i=e.activeId;if(n.isSubmitEnabled()&&n.checkCustomReasonContent()){var o=n.props,s=o.nodes,r=o.onSubmit,c=o.onDeleteComment,l=s[t||i],u=l.reason,d=l.id;n.setState({isSubmiting:!0});var p=r({reason:u,customReason:a});p&&p.then?p.then(n.submitEnd):n.submitEnd();var b=n.props,m=b.zaEnabled,h=b.type;if(m){var f=c&&n.hasEffectOfDeleteComment();j.a.trackEvent(null,{id:2885,name:n.getReportLevel(),action:"Click"},{report:{type:h},button:{text:n.getReportText(d)}}),j.a.trackEvent(Object(G.default)(n),Object.assign({action:"Report",element:"Button"},f&&{id:3039,name:u}),Object.assign({report:{id:d,type:h}},f&&{button:{text:n.state.commentChecked?"举报并删除":"仅举报"}}))}}},n.submitEnd=function(e){n.setState({isSubmiting:!1,isSubmited:!0});var t=n.state,a=t.blockChecked,i=t.commentChecked,o=n.props,s=o.onBlockUser,r=o.onDeleteComment,c=o.onEnd;Promise.all([a&&s&&s(),i&&r&&r()].map(function(e){return Promise.resolve(e).catch(function(e){return e})})).then(function(t){var n=Object(V.a)(t,2),a=n[0],i=n[1];c&&c({result:e,blockUserResult:a,commentDeleteResult:i})})},n.checkCustomReasonContent=function(){var e=n.state,t=e.activeId,a=e.customReason,i=n.props.nodes[t].copywriter;if(Boolean(i)&&a){var o=ne(a,i),s=o.isLegal,r=o.errorReason;if(!s)return n.setState({errorText:r}),!1}return!0},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.type,t=Z()(navigator.userAgent);this.setState({isMobile:t.Mobile}),j.a.trackCardShow(null,{id:2890},{button:{text:e}})}},{key:"componentWillUpdate",value:function(e,t){var n=this.state.activeId,a=t.activeId,i=this.props,o=i.nodes,s=i.onContentChange;if(a!==n){var r=o[a],c=r.reason,l=r.text,u=r.copywriter,d=r.subtitle,p=this.getChildIds(o[a].childIds);s(l||Q.b[c],d||u&&u.title||(p?void 0:""))}}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.zaEnabled,n=e.type,a=this.state.isSubmited;t&&!a&&j.a.trackEvent(null,{id:4328,action:"Close",name:this.getReportLevel()},{report:{type:n}})}},{key:"isSubmitEnabled",value:function(){var e=this.state,t=e.selectedId,n=e.activeId,a=e.customReason;if(t)return!0;var i=this.props,o=i.nodes,s=i.type,r=o[n].copywriter;if(!r)return!1;var c=r.isRequired,l=void 0===c||c,u=Array.isArray(l)?l.includes(s):l;return Boolean(!u||a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.nodes,a=t.options,i=t.type,r=Object(s.a)(t,["nodes","options","type"]),c=this.state,l=c.activeId,u=c.parentId,d=c.selectedId,p=c.errorText,m=c.isMobile,h=n[l],f=h.copywriter,j=void 0!==f&&f,O=h.customComponent,y=h.des,C=h.url,R=j.isRequired,N=void 0===R||R,I=this.getChildIds(h.childIds),S=I&&I.map(function(e){return n[e]}).filter(function(e){return e&&(!e.shouldShow||e.shouldShow(r))}),P=!0===N||Array.isArray(N)&&N.includes(i);if(void 0!==O)return Object(b.b)(O,Object(o.default)({onBackClick:this.handleBackClick,onItemSelect:this.handleItemSelect,onSubMenuEnter:this.handleSubMenuEnter},this.props,this.state,{activeNode:h,parentNode:n[u],childNodes:S}));var T=Boolean(I),x=Boolean(j),F=T&&Object(b.b)("div",{className:"ReportMenu-inner ReportMenu-options"},S.map(function(t){return Object(b.b)(X,Object(o.default)({ref:function(n){e.menuItems[t.id]=n},key:t.id},t,{isSelected:d===t.id,onSubMenuEnter:e.handleSubMenuEnter,onItemSelect:e.handleItemSelect,type:i}))})," ")||x&&Object(b.b)(ee,{onDetailInput:this.handleDetailInput,type:i,copywriter:j,errorText:p,checkCustomReasonContent:this.checkCustomReasonContent,isCustomReasonRequired:P}),z=T&&r.talkerToken&&Object(b.b)(te,{checked:this.state.blockChecked,text:"将此人屏蔽",onChange:function(t){return e.setState({blockChecked:t.target.checked})}}),M=n[u||l],D=r.onDeleteComment&&this.hasEffectOfDeleteComment()&&Object(b.b)(te,{checked:this.state.commentChecked,desc:M&&"社区鼓励举报".concat(M.text,"，同时可以直接删除该评论，删除操作并不影响对违规内容和违规用户的处理。"),onChange:function(t){return e.setState({commentChecked:t.target.checked})},text:"删除该评论"}),L=this.props.isSubmiting;return Object(b.b)("div",{className:g()("ReportMenu",{"ReportMenu-mobile":m})},F,(z||D)&&Object(b.b)("div",null,z,D,a),Object(b.b)(w.a,{direction:"horizontal"},"number"==typeof u&&Object(b.b)(k.c,{onClick:this.handleBackClick}," 返回 "),(T||x)&&Object(b.b)(k.c,{className:"ReportMenu-button",disabled:L||!this.isSubmitEnabled(),onClick:this.handleSubmit,color:"blue",preset:"primary"},"举报")),x&&y&&Object(b.b)("div",{className:"ReportMenu-des"},y,C&&Object(b.b)(v.a.Fragment,null,"点击",Object(b.b)(J.a,{className:"ReportMenu-deslink",href:C},"了解更多社区规范"),"。")))}}]),t}(f.Component));ae.propTypes={nodes:h.a.object.isRequired,onContentChange:h.a.func.isRequired,onSubmit:h.a.func.isRequired,onEnd:h.a.func,onBlockUser:h.a.func,onDeleteComment:h.a.func,isColumnArticle:h.a.bool,isTipjarEnabled:h.a.bool,showRepostOnTopLevel:h.a.bool},ae.defaultProps={showRepostOnTopLevel:!1};var ie=ae,oe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).filterNodes=function(e,t,n){var a=e.filter(function(e){return!!e.isRequired||(!(!["infringement","repost","oneself","enterprise","fake"].includes(e.reason)&&0!==e.id)||("question"!==t||!["suggested","evaluated"].includes(n)||0===e.id)&&("member"!==t||!["ban","hang"].includes(n)||"profile"===e.reason))});return 1===a.length&&0===a[0].id&&(a=[]),a},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.type,a=t.status,i=Object(s.a)(t,["type","status"]);return e="message"===n?A:["member","club_mask"].includes(n)?U:["drama","drama_connect_member"].includes(n)?W:"theater"===n?K:"favlist"===n||"collection"===n?_:B.filter(function(e){return!e.types||e.types.includes(n)}),e=this.filterNodes(e,n,a),Object(b.b)(ie,Object(o.default)({nodes:e.reduce(function(e,t){return Object.assign({},e,Object(r.a)({},t.id,t))},{})},i,{type:n}))}}]),t}(f.Component);oe.propTypes={type:h.a.string.isRequired};var se=n(1457),re=function(e){return"article"===e?"Post":"book_review"===e?"BookReview":"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1))},ce=n(139),le="请选择举报理由",ue="举报",de=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={title:void 0!==n.props.title?n.props.title:ue,subtitle:void 0!==n.props.subtitle?n.props.subtitle:le},n.handleSubmit=function(e){var t=e.reason,a=e.customReason,i=n.props,o=i.urlToken,s=i.type;return n.props.doReport(o,s,t,a)},n.handleContentChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;n.setState({title:e,subtitle:t})},n.handleClose=function(){n.props.zaEnabled&&j.a.trackEvent(n.container,{action:"Ok"},{button:{text:"知道了"}}),n.props.onClose()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){if(!e.shown&&this.props.shown){var t=this.props,n=t.type,a=t.id;j.a.setModule(this.container,{module:"ReportDialog"},{card:{card_type:"Content",content:Object(r.a)({type:re(n)},"comment"===n?"id":"token",String(a))}})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.shown,a=t.onClose,i=Object(s.a)(t,["shown","onClose"]),r=this.state,c=r.title,l=r.subtitle,u=Object(se.a)(i,Object.keys(O.b.propTypes)),d=u.selectedProps,p=u.dropedProps;return Object(b.b)(O.b,Object(o.default)({title:c,subtitle:l,onClose:this.handleClose,className:"ReportModal"},d),n&&Object(b.b)(oe,Object(o.default)({ref:function(t){e.container=t},onSubmit:this.handleSubmit,onEnd:a,onContentChange:this.handleContentChange},p)))}}]),t}(f.Component);de.propTypes={onClose:h.a.func.isRequired,type:h.a.oneOf(ce.a).isRequired,shown:h.a.bool.isRequired,isColumnArticle:h.a.bool,isTipjarEnabled:h.a.bool,onBlockUser:h.a.func,onDeleteComment:h.a.func,doReport:h.a.func.isRequired,zaEnabled:h.a.bool},de.defaultTypes={zaEnabled:!1}},1680:function(e,t,n){"use strict";n.r(t),n.d(t,"FavlistsModal",function(){return L});var a=n(15),i=n(14),o=n(0),s=n(2),r=n.n(s),c=n(1),l=n(41),u=n(1457),d=function(e,t,n){return n&&void 0!==t&&(e||!t)},p=(n(264),n(10)),b=n(34),m=n(9),h=n.n(m),f=n(61),v=n(354),j=function(e){var t,n=e.onBack,a=e.onSubmit,s=e.authRequired,r=e.isActive,l=e.editItem,u=void 0===l?{}:l,m=e.isDefaultPage,j="edit"===e.currentPage,O=Object(c.useState)(null===(t=u.isPublic)||void 0===t||t),y=Object(i.a)(O,2),g=y[0],C=y[1],k=Object(c.useState)(u.title||""),w=Object(i.a)(k,2),R=w[0],N=w[1],I=Object(c.useState)(u.description||""),S=Object(i.a)(I,2),P=S[0],T=S[1],x=!R||R.length>20||P.length>60,F=j&&!0===u.isPublic&&u.followerCount>0;return Object(o.b)("form",{className:"Favlists-content",onSubmit:function(e){if(e.preventDefault(),R){var t={title:R,description:P,isPublic:g};d(g,r,s)?s(a)(t):(a(t),n())}}},Object(o.b)("div",{className:"Favlists-addItems"},Object(o.b)("div",{className:"Favlists-addItem"},Object(o.b)(f.a,{className:"Favlists-titleInput",placeholder:"收藏标题",onChange:function(e){N(e.target.value)},value:R}),Object(o.b)("div",{className:"Favlists-inputTips"},Object(o.b)(v.a,{name:"收藏标题",current:R?R.length:0,max:20}))),Object(o.b)("div",{className:"Favlists-addItem"},Object(o.b)(f.a,{multiline:!0,className:"Favlists-descritionInput",placeholder:"收藏描述（可选）",onChange:function(e){T(e.target.value)},rows:5,value:P}),Object(o.b)("div",{className:"Favlists-inputTips"},Object(o.b)(v.a,{name:"收藏描述",current:P?P.length:0,max:60}))),Object(o.b)("div",{className:"Favlists-addItem"},Object(o.b)("label",{className:"Favlists-privacyOption"},Object(o.b)("input",{className:"Favlists-privacyOptionRadio",name:"isPublic",type:"radio",value:"true",checked:g,onChange:function(){return C(!0)}}),Object(o.b)("span",null,"公开"),Object(o.b)("span",{className:"Favlists-privacyOptionTips"},"有其他人关注此收藏夹时不可设置为私密")),Object(o.b)("label",{className:h()("Favlists-privacyOption",{"Favlists-privacyOption--privacyDisable":F})},Object(o.b)("input",{className:"Favlists-privacyOptionRadio",name:"isPublic",type:"radio",value:"false",checked:!g,onChange:function(){return C(!1)},disabled:F}),Object(o.b)("span",null,"私密"),Object(o.b)("span",{className:"Favlists-privacyOptionTips"},F?"当前有人在关注此收藏夹，无法设为隐私":"只有你自己可以查看这个收藏夹")))),Object(o.b)(b.a,{direction:"horizontal",className:""},n&&Object(o.b)(p.c,{onClick:n},m?"取消":"返回"),Object(o.b)(p.c,{color:"blue",preset:"primary",type:"submit",disabled:x},m?"确认":"确认创建")))};j.propTypes={onSubmit:r.a.func.isRequired,onBack:r.a.func,authRequired:r.a.func,isActive:r.a.bool,editItem:r.a.shape({type:r.a.oneOf(["collection"])}),currentPage:r.a.oneOf(["edit","add"]),isDefaultPage:r.a.bool};var O=j,y=(n(1630),n(4)),g=n(8),C=n(7),k=n(5),w=n(6),R=n(60),N=n(212),I=n(11),S=n(1381),P=function(e){function t(){var e,n;Object(y.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(i)))).handleChange=function(){var e=n.props;(0,e.onChange)(e.id,n.props.checked)},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.zaEnabled,n=e.id;t&&I.a.setModule(this,{module:"CollectionItem"},{card:{card_type:"Content",content:{type:"Collection",token:String(n)}}})}},{key:"render",value:function(){var e=this.props,t=e.answerCount,n=e.title,i=e.isPublic,s=e.checked,r=void 0!==s&&s?{preset:"primary",color:"grey",children:"已收藏"}:{color:"blue",children:"收藏"};return Object(o.b)("div",{className:"Favlists-item"},Object(o.b)("div",{className:"Favlists-itemInner"},Object(o.b)("div",{className:"Favlists-itemName"},Object(o.b)("span",{className:"Favlists-itemNameText"},n),!1===i&&Object(o.b)("span",{className:"Favlists-itemIcon"},Object(o.b)(S.a,{size:16}))),Object(o.b)("div",{className:"Favlists-itemContent"},t," 条内容")),Object(o.b)(p.c,Object(a.default)({},r,{className:"Favlists-updateButton",onClick:this.handleChange})))}}]),t}(c.Component),T=function(e){function t(){var e,n;Object(y.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(i)))).items={},n.handleFavlistItemChange=function(e,t){I.a.trackEvent(n.items[e],{action:t?"UnCollect":"Collect",element:"Button",is_intent:!1}),n.props.onUpdate(e,t)},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.relations,i=t.items,s=t.isFetching,r=t.isDrained,c=t.onAdd,l=t.onLoad;return Object(o.b)("div",{className:"Favlists-content"},Object(o.b)(R.b,{isLocal:!0,isLoading:s,isDrained:r,onLoad:l,placeholder:Object(o.b)(N.a,{title:!0}),getContainer:function(e){return e},className:"Favlists-items"},i.map(function(t){return Object(o.b)(P,Object(a.default)({key:t.id,onChange:e.handleFavlistItemChange,checked:n[t.id]},t,{ref:function(n){e.items[t.id]=n}}))})),!i.length&&s||Object(o.b)("div",{className:"Favlists-actions"},Object(o.b)(p.c,{className:"Favlists-addButton",onClick:c,preset:"primary",color:"blue"},"创建收藏夹")))}}]),t}(c.Component);T.propTypes={isFetching:r.a.bool,relations:r.a.object,onUpdate:r.a.func.isRequired,onAdd:r.a.func.isRequired,onLoad:r.a.func.isRequired,items:r.a.array.isRequired,isDrained:r.a.bool,authRequired:r.a.func};var x=T,F=Object(c.forwardRef)(function(e,t){var n=e.currentPage,a=e.items,i=e.isFetching,s=e.isDrained,r=e.relations,c=e.handleUpdateFavList,l=e.onLoad,u=e.zaEnabled,d=e.handleAdd,m=e.handleCloseModal,h=e.onFavlistAdd,f=e.authRequired,v=e.isUserActive,j=e.defaultStatus,y=e.handleBack,g=e.hasFavlists,C=e.editItem,k=void 0===C?{}:C,w=e.onUpdateFavContent;if("list"===n)return g?Object(o.b)(x,{ref:t,items:a,isFetching:i,isDrained:s,relations:r,onAdd:d,onUpdate:c,onLoad:l,zaEnabled:u}):Object(o.b)(b.a,null,Object(o.b)(p.c,{preset:"primary",color:"blue",onClick:d},"创建收藏夹"),Object(o.b)(p.c,{onClick:m},"取消"));if(["add","edit"].includes(n)){var R=j===n;return Object(o.b)(O,{onSubmit:"add"===n?h:w,isActive:v,onBack:R?m:y,authRequired:f,editItem:k,currentPage:n,isDefaultPage:R})}return null});F.propTypes={currentPage:r.a.oneOf(["list","add","edit"]).isRequired,items:r.a.arrayOf(r.a.shape({type:r.a.oneOf(["collection"])})),isFetching:r.a.bool,isDrained:r.a.bool,relations:r.a.object,handleUpdateFavList:r.a.func,onLoad:r.a.func,zaEnabled:r.a.bool,handleAdd:r.a.func,handleCloseModal:r.a.func.isRequired,onFavlistAdd:r.a.func,authRequired:r.a.func,isUserActive:r.a.bool,defaultStatus:r.a.oneOf(["list","add","edit"]),handleBack:r.a.func,hasFavlists:r.a.bool,editItem:r.a.shape({type:r.a.oneOf(["collection"])}),onUpdateFavContent:r.a.func};var z=F,M=(n(1631),{list:{title:"添加收藏",tips:function(e){return e?"请选择你想添加的收藏夹":"你可以创建多个收藏夹，将答案分类收藏"}},add:{title:"创建新收藏夹"},edit:{title:"编辑收藏夹"}}),D=function(e){var t=e.shown,n=e.items,s=e.id,r=e.type,p=e.onFetchRelations,b=e.relations,m=e.onClose,h=e.isUserActive,f=e.authRequired,v=e.defaultStatus,j=e.onUpdateFav,O=e.isDrained,y=e.isFetching,g=e.onLoad,C=e.zaEnabled,k=e.onFavlistAdd,w=e.editItem,R=e.onUpdateFavContent,N=Object(c.useState)(v),I=Object(i.a)(N,2),S=I[0],P=I[1],T=Object(c.useRef)([]);Object(c.useEffect)(function(){if(p&&t&&n.length!==T.current.length){T.current=n;var e=(b?n.filter(function(e){return!b[e.id]}):n).map(function(e){return e.id});e.length&&p(s,r,e)}},[s,n,p,b,t,r]),Object(c.useEffect)(function(){"add"===S&&"list"===v&&T.current.length<n.length&&P("list")},[S,v,w,n]);var x=function(){m(),"list"===v&&P("list")},F=!(O&&!n.length),D=Object(u.a)(e,Object.keys(l.b.propTypes)).selectedProps,L=M[S],q=L.tips,E=L.title;return Object(o.b)(l.b,Object(a.default)({},D,{onClose:x,title:E,subtitle:q&&q(F),buttonGroupOnly:!F,className:"FavlistsModal",size:"large"}),t&&Object(o.b)(z,{currentPage:S,items:n,isFetching:y,isDrained:O,relations:b,handleUpdateFavList:function(e,t){var a=n.find(function(t){return t.id===e})||{},i=[e,s,r,a.isPublic];return!t&&d(a.isPublic,h,f)?f(j).apply(void 0,i):j.apply(void 0,i)},onLoad:g,zaEnabled:C,handleAdd:function(){return P("add")},handleCloseModal:x,onFavlistAdd:k,authRequired:f,isUserActive:h,defaultStatus:v,handleBack:function(){return P("list")},hasFavlists:F,editItem:w,onUpdateFavContent:R}))};D.propTypes={id:r.a.oneOfType([r.a.string,r.a.number]),type:r.a.oneOf(["answer","article","pin","zvideo"]),relations:r.a.object,onUpdateFav:r.a.func,onFavlistAdd:r.a.func,onFetchRelations:r.a.func,onClose:r.a.func.isRequired,shown:r.a.bool,zaEnabled:r.a.bool,authRequired:r.a.func,isUserActive:r.a.bool,defaultStatus:r.a.oneOf(["list","add","edit"]),onLoad:r.a.func,editItem:r.a.shape({type:r.a.oneOf(["collection"])}),onUpdateFavContent:r.a.func},D.defaultProps={defaultStatus:"list",relations:{},authRequired:function(e){return e}};var L=D},1685:function(e,t,n){"use strict";n.r(t),n.d(t,"TipjarDialog",function(){return H});var a=n(4),i=n(8),o=n(7),s=n(5),r=n(6),c=n(0),l=n(1),u=n.n(l),d=n(2),p=n.n(d),b=n(9),m=n.n(b),h=n(10),f=n(34),v=n(550),j=n(64),O=n(1353),y=n(1654),g=n.n(y),C=n(1655),k=n.n(C),w=n(32),R=(n(1656),8),N=9,I=13,S=48,P=57;function T(e,t){return e?t?!0===t?"":t:e:""}var x=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).onInputFocus=n.onInputFocus.bind(Object(w.default)(n)),n.onInputChange=n.onInputChange.bind(Object(w.default)(n)),n.onKeyDown=n.onKeyDown.bind(Object(w.default)(n)),n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"onInputFocus",value:function(){this.props.onFocus()}},{key:"onInputChange",value:function(e){var t=String(e.target.value);if(t){t=t[t.length-1];var n=this.props.chars,a=this.props.length;n.length===a?n=n.replace(/.$/,t):n+=t,this.props.onChange(n),n.length===a&&this.props.onFinish(n)}}},{key:"onKeyDown",value:function(e){var t=e.keyCode;if(!e.metaKey&&!e.ctrlKey&&t!==N&&t!==I){var n=this.props.chars;t===R?(n=n.slice(0,-1),this.props.onChange(n)):(t<S||t>P)&&(e.preventDefault(),this.props.onError(e))}}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e=this,t=this.props,n=t.length,a=t.chars,i=t.maskChar,o=t.autoFocus,s=t.className,r=t.children,l=a.length===n?n-1:a.length,u=a[l]||"";return Object(c.b)("label",{className:m()("TPass",s)},Object(c.b)("span",{className:"TPass-wrapper"},Object(c.b)(F,{length:n,chars:a,maskChar:i}),Object(c.b)("input",{className:"TPass-input",value:u,style:{left:60*l},onFocus:this.onInputFocus,onChange:this.onInputChange,onKeyDown:this.onKeyDown,onPaste:function(e){return e.preventDefault()},type:"number",min:"0",max:"9",pattern:"[0-9]*",autoFocus:o,ref:function(t){e.input=t}})),r)}}]),t}(u.a.Component);function F(e){for(var t,n=e.length,a=e.chars,i=e.maskChar,o=[],s=0;s<n;s+=1)t=a[s],o.push(Object(c.b)("span",{className:m()("TPassBox",{"TPassBox-mask":t&&Boolean(i)}),key:s},T(t,i)));return Object(c.b)("span",{className:"TPassBoxes"},o)}x.defaultProps={length:6,chars:"",maskChar:!1,autoFocus:!1,onFocus:function(){},onChange:function(){},onError:function(){},onFinish:function(){}},x.propTypes={length:p.a.number,chars:p.a.string,maskChar:p.a.oneOfType([p.a.bool,p.a.string]),autoFocus:p.a.bool,onFocus:p.a.func,onChange:p.a.func,onError:p.a.func,onFinish:p.a.func,className:p.a.string,children:p.a.node};var z=x,M=(n(1657),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props;return Object(c.b)("div",{className:m()("Spinner",e)},Object(c.b)("i",{className:"Spinner-loading"}))}}]),t}(l.Component));M.propTypes={className:p.a.string};var D=n(174),L=(n(1658),11);function q(){this.payments={},this.chosePaymentName=null,this.codeUrl="",this.qrLoaded=!1,this.need=null,this.passcode="",this.needSMS=!1,this.smsTimer=0,this.isInProgress=!1,this.error=null}var E={name:"1qc85lp",styles:"padding:0;border:none;"},B=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).onPasscodeFocus=function(){n.state.error&&(n.setState({error:null}),6===n.state.passcode.length&&n.setState({passcode:""}))},n.onPasscodeInput=function(e){"object"==typeof e&&(e=e.target.value),n.setState({passcode:e})},n.onPasscodeFinish=function(e){n.tpass.blur(),n.payWithBalance(e)},n.onSendSMSCode=function(){n.props.trade.resendSMSCode(function(){n.startSMSTimer(),n.smsInput.focus()},function(e){n.setState({error:e})})},n.onQrLoad=function(){n.setState({qrLoaded:!0})},n.onBalanceFormSubmit=function(e){e.preventDefault(),n.payWithBalance(n.state.passcode)},n.setPayments=function(e){n.setState({payments:e})},n.confirmPayment=function(){var e=n.state,t=e.choseName,a=e.payments,i=n.props.onConfirmPayment,o=t;if(t||(o=a.balance&&a.balance.enable?"balance":"wechat"),i(!o),n.setState({chosePaymentName:o}),"wechat"===o&&n.isInWechat){var s=n.props.tradeNumber,r="".concat(location.protocol,"//").concat(location.host).concat(location.pathname),c="".concat("https://www.zhihu.com/pay/weixin/pay?service_id=".concat(L)+"&trade_number=".concat(s,"&redirect_uri=").concat(encodeURIComponent(r)));window.location.replace(c)}else n.props.trade["wechat"===o?"initWechatPay":"initBalancePay"]()},n.pid=0,n.smsTimer=null,n.state=new q,n.isInWechat=e.ua.Wechat,n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.trade;this.getPaymentsList(e),this.initListeners(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.trade!==this.props.trade&&(this.setState(new q),setTimeout(function(){t.getPaymentsList(e.trade)},300),this.initListeners(e.trade))}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.smsTimer),this.props.trade.dispose()}},{key:"getPaymentsList",value:function(e){var t=this;if(e){var n=this.pid+=1;e.getPaymentsList(function(e){t.pid===n&&t.setPayments(e)})}}},{key:"initListeners",value:function(e){var t=this;e&&e.on("payInited",function(e,n){t.setState(Object.assign({},n))}).on("paySuccess",function(){t.setState({isInProgress:!1,error:null}),t.props.onSuccess()}).on("payCancel",function(){t.setState({isInProgress:!1,chosePaymentName:null})}).on("payFail",function(e){var n=e;"object"!=typeof e||e instanceof Error||(n=e.message),t.setState({isInProgress:!1,error:n}),t.props.onFail(e)}).on("needSMS",function(e){t.setState({isInProgress:!1,error:null,needSMS:e.message,passcode:""})}).on("needWechatCode",function(){t.props.onError("needWechatCode")}).on("error",function(e,n){t.props.onError(e,n)})}},{key:"startSMSTimer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;window.clearInterval(this.smsTimer),this.setState({smsTimer:t}),this.smsTimer=window.setInterval(function(){(t-=1)<=0?(window.clearInterval(e.smsTimer),e.smsTimer=null,e.setState({smsTimer:0})):e.setState({smsTimer:t})},1e3)}},{key:"payWithBalance",value:function(e){return 6!==e.length?(this.setState({error:"请输入 6 位支付密码"}),!1):(this.setState({isInProgress:!0,error:null}),this.props.trade.payWithBalance(e))}},{key:"renderPaymentsList",value:function(){var e=this,t=this.state,n=t.payments,a=t.chosePaymentName,i=t.choseName,o=this.props.trade;if(a)return null;var s=n.balance&&n.balance.amount,r=o.info.total,l=n.wechat&&n.wechat.enable,u=this.props.balanceEnable,d=n.balance&&n.balance.enable,p=n.balance&&!n.balance.enable,b=u&&s>=r,m="使用余额（剩余 ".concat((s/100).toFixed(2),"）"),f=b?m:"微信支付",v=b?"wallet":"wechatPayment";i&&(f="wechat"===i?"微信支付":m,v="wechat"===i?"wechatPayment":"wallet");var y=Object(c.b)(h.c,{css:E},"wechatPayment"===v?Object(c.b)(k.a,{center:!0}):Object(c.b)(g.a,{center:!0})," ",f,Object(c.b)(O.a,{center:!0}));return Object(c.b)("div",{className:"PaymentsList"},Object(c.b)("span",{className:"Payment-Topline"}),Object(c.b)("span",{className:"PaymentWay"},"支付方式"),Object(c.b)(D.a,{placeholder:y},Object(c.b)(j.b,{plain:!0,className:"Payment-select",listClassName:"Payment-select-list",targetClassName:"Popover-targetContainer-verification",menuToggler:y,onChange:function(t){"disabled"!==t&&e.setState({choseName:t})}},u&&d&&Object(c.b)(j.a,{value:"balance",className:"PaymentItem"},Object(c.b)(g.a,{center:!0}),m),u&&p&&Object(c.b)(j.a,{value:"disabled",className:"PaymentItem PaymentItem--disabled"},Object(c.b)(g.a,{center:!0}),m),l&&Object(c.b)(j.a,{value:"wechat",className:"PaymentItem"},Object(c.b)(k.a,{center:!0}),"微信支付"))),Object(c.b)("span",{className:"Payment-Bottomline"}),Object(c.b)(h.c,{className:"Payment-CheckedButton",onClick:this.confirmPayment},"确认支付"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.trade,i=this.state,o=i.payments,s=i.chosePaymentName,r=i.codeUrl,l=i.needSMS,u=i.isInProgress;return a?Object(c.b)("div",{className:m()("Payment",n)},Object.keys(o).length?this.renderPaymentsList():Object(c.b)("div",{className:"Payment-placeholder"},Object(c.b)(M,null)),"wechat"===s&&Object(c.b)("div",{className:"Payment-wechatPay"},Object(c.b)("div",{className:"Payment-wechatPayTitle"},Object(c.b)("i",{className:"icon icon-ic_wechatpay PaymentIconWechat"}),"微信支付"),!this.isInWechat&&Object(c.b)("div",null,"使用微信扫描二维码完成支付"),this.state.qrLoaded?Object(c.b)("span",{className:"Payment-qrWrapper"},Object(c.b)("img",{role:"presentation",src:"//www.zhihu.com/qrcode?url=".concat(r),width:"150",height:"150"})):Object(c.b)("div",{className:"Payment-qrPlaceholder"},Object(c.b)(M,null),!this.isInWechat&&Object(c.b)("div",null,"正在生成二维码"),r&&Object(c.b)("img",{role:"presentation",src:"//www.zhihu.com/qrcode?url=".concat(r),width:"1",height:"1",onLoad:this.onQrLoad}))),"balance"===s&&Object(c.b)("form",{onSubmit:this.onBalanceFormSubmit,className:"Payment-balancePay"},Object(c.b)("div",{className:"Payment-balancePayTitle"},Object(c.b)("i",{className:"icon icon-wallet PaymentIconWallet"}),"余额支付"),!l&&Object(c.b)("div",null,Object(c.b)("div",{className:"Payment-description"},"请输入 6 位数知乎支付密码，用于支付验证。"),Object(c.b)(z,{chars:this.state.passcode,onFocus:this.onPasscodeFocus,onChange:this.onPasscodeInput,maskChar:!0,onFinish:this.onPasscodeFinish,className:m()("Payment-tpass",{"Payment-errorInput":this.state.error,"Payment-progressing":u}),autoFocus:!0,ref:function(t){e.tpass=t}},u&&Object(c.b)(M,{className:"Payment-balancePaySpinner"}))),Boolean(l)&&Object(c.b)("div",{className:"Payment-balancePaySms"},Object(c.b)("div",{className:"Payment-balancePaySmsText"},String(l)),Object(c.b)("input",{onChange:this.onPasscodeInput,value:this.state.passcode,className:m()("Payment-sms","SimpleInput",{"Payment-errorInput":this.state.error}),type:"text",pattern:"\\d{6}",minLength:"6",maxLength:"6",title:"验证码应为 6 位数字",placeholder:"输入 6 位数验证码",required:!0,autoFocus:!0,ref:function(t){e.smsInput=t}}),this.state.smsTimer?Object(c.b)("button",{className:"Payment-sendSms",type:"button",disabled:!0},this.state.smsTimer," 秒后可重发"):Object(c.b)("button",{onClick:this.onSendSMSCode,className:"Payment-sendSms",type:"button"},"发送验证码")),Object(c.b)("div",{className:"Payment-balancePayFooter"},Object(c.b)("p",{className:"Payment-errorTip",style:{visibility:this.state.error?"visible":"hidden"}},this.state.error),Boolean(l)&&Object(c.b)(h.c,{color:"blue",disabled:u,className:"Payment-balancePayConfirmBtn",type:"submit"},"确认")),!l&&Object(c.b)("div",{className:"Payment-balancePayForget"},"如果忘记密码请邮件联系"," ",Object(c.b)("email",{className:"Payment-email"},"i@zhihu.com")))):Object(c.b)("div",{className:m()("Payment",n)},Object(c.b)("div",{className:"Payment-placeholder Payment-placehoder--empty"},Object(c.b)(M,null)))}}]),t}(u.a.Component);B.propTypes={trade:p.a.object,autoChooseSinglePayment:p.a.bool,onSuccess:p.a.func.isRequired,onFail:p.a.func,onError:p.a.func,onConfirmPayment:p.a.func,balanceEnable:p.a.bool},B.defaultProps={trade:null,onSuccess:function(){},onFail:function(){},onError:function(){},autoChooseSinglePayment:!0,className:"",balanceEnable:!0};var _=B,A=n(162),U="",W=null;var K=n(20),V=(n(1659),[200,500,1e3,5e3,1e4,2e4]),G=100,H=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).onConfirmPayment=function(e){n.setState({chosePaymentName:e})},n.onPaySuccess=function(){n.props.onPaySuccess(),n.setState({chosePaymentName:!0,colseTijarDialogStatus:!0,trade:void 0,currentAmount:"",customButton:!1})},n.handleCustomAmount=function(){n.state.trade&&n.state.trade.dispose(),n.setState({showCustom:!0})},n.handleCustomChange=function(e){var t=e.target.value;isNaN(t)?n.setState({customAmount:""}):n.setState({customAmount:parseInt(t)||""})},n.handleCustomKeyUp=function(e){13===e.keyCode&&n.handleSubmitCustom()},n.handleSubmitCustom=function(){var e=n.state.customAmount*G;e>0&&e<=5e4&&(n.setState({customButton:!0,showCustom:!1,colseTijarDialogStatus:!1}),n.createTrade(e))},n.closeModal=function(){n.state.trade&&n.state.trade.dispose(),n.setState(n.getDefaultState())},n.handleAmountButton=function(e){n.createTrade(e.currentTarget.dataset.amount),n.setState({colseTijarDialogStatus:!1,customButton:!1,showCustom:!1})},n.createTrade=function(e){n.setState({tradeLoading:!0,currentAmount:e});var t=n.props.ua;n.props.addReward(e,t.Wechat?"wechat":"normal"),n.setState({tradeLoading:!1})},n.colseTijarDialog=function(){n.setState({chosePaymentName:!0,colseTijarDialogStatus:!0,trade:void 0,currentAmount:""}),n.props.colseTijarDialog()},n.state=n.getDefaultState(),n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.showTip()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.tradeNumber,n=e.type,a=this.state,i=a.trade,o=a.colseTijarDialogStatus,s="article"===n?11:17;if(t&&(!i||t!==i.tradeNo)&&!o){var r=new window.zhihu.pay.Trade(t,s);this.setState({trade:r})}}},{key:"componentWillUnmount",value:function(){this.props.TipjarRender&&this.props.removeTradeNumber()}},{key:"getDefaultState",value:function(){return{showCustom:!1,customAmount:"",currentAmount:"",showTipModal:!1,customButton:!1,chosePaymentName:!0,colseTijarDialogStatus:!1}}},{key:"showTip",value:function(){var e,t,n=this;e="https://pay.zhihu.com/api/js",t=function(){n.setState({showTipModal:!0})},U&&e&&e!==U&&t(new Error("A pay-sdk from different source has been load")),U=e,window.zhihu&&window.zhihu.pay?window.zhihu.pay.ready(t):(W||(W=Object(A.loadScript)(e)),W.then(function(){return window.zhihu.pay.ready(t)},function(e){t(e),W=null}))}},{key:"renderAmountCustom",value:function(){var e=this.state,t=e.showCustom,n=e.customAmount,a=e.currentAmount,i=e.customButton;return Object(c.b)("div",{className:"Reward-TipjarDialog-amountCustom"},t?Object(c.b)("div",{className:"Reward-TipjarDialog-amountInput"},Object(c.b)("input",{name:"",type:"text",className:"SimpleInput",placeholder:"你想赞赏的金额（不超过 500）",value:n,onChange:this.handleCustomChange,onKeyUp:this.handleCustomKeyUp,ref:function(e){e&&e.focus()}}),Object(c.b)(h.c,{disabled:n<=0||n>500,color:"blue",preset:"primary",onClick:this.handleSubmitCustom},"确定"),Object(c.b)("div",{className:"Reward-TipjarDialog-error",style:{display:n>500?"block":"none"}},"不能超过 500 元")):Object(c.b)(h.c,{preset:"plain",className:i?"TipjarDialog-customButton-cheked":"TipjarDialog-customButton",onClick:this.handleCustomAmount},i?"自定义金额： ¥ ".concat(a/G):"自定义金额"))}},{key:"renderTipjarDialog",value:function(){var e=this,t=this.props,n=t.author,a=n.name,i=n.avatarUrl,o=n.isOrg,s=n.urlToken,r=n.id,l=t.tagline,u=this.state.currentAmount;return Object(c.b)("div",{className:"Reward-TipjarDialog"},Object(c.b)("div",{className:"Reward-TipjarDialog-user"},Object(c.b)("a",{href:"/".concat(o?"org":"people","/").concat(s||r),className:"Reward-UserAvatar"},Object(c.b)("img",{src:i.replace("_is","_l"),className:"Reward-Avatar",alt:"当前用户"})),a),Object(c.b)("div",{className:"Reward-TipjarDialog-tagLine"},l),Object(c.b)("div",{className:"Reward-TipjarDialog-selectAmount"},Object(c.b)("div",{className:"Reward-TipjarDialog-amountList"},V.map(function(t){return Object(c.b)(h.c,{key:t,"data-amount":t,onClick:e.handleAmountButton,color:"red",className:m()({"Reward-Button-checked":Number(u)===t})},Object(c.b)("b",null,Number(u)===t?"".concat(t/G," 元"):"¥ ".concat(t/G)))})),this.renderAmountCustom()))}},{key:"render",value:function(){var e=this.props,t=e.ua,n=e.TipjarRender,a=e.isMobile,i=e.tradeNumber,o=e.balanceEnable,s=this.state,r=s.showCustom,l=s.tradeLoading,u=s.showTipModal,d=s.trade,p=s.chosePaymentName,b=a?v.a:f.b,m=a?"small":"default";return Object(c.b)(b,{overlay:!0,size:m,onClose:this.colseTijarDialog,className:"Reward-TipjarDialogModal"},n&&Object(c.b)("div",null,u&&p&&this.renderTipjarDialog(),(d||l)&&!r&&Object(c.b)(_,{trade:d,tradeNumber:i,ua:t,onSuccess:this.onPaySuccess,onConfirmPayment:this.onConfirmPayment,balanceEnable:o})))}}]),t}(l.Component);H.propTypes={author:p.a.object,tagline:p.a.string,colseTijarDialog:p.a.func,addReward:p.a.func,tradeNumber:p.a.number,removeTradeNumber:p.a.func,onPaySuccess:p.a.func,isMobile:p.a.bool,type:p.a.string,balanceEnable:p.a.bool},H.defaultProps={tagline:K.l,balanceEnable:!0}}}]);
//# sourceMappingURL=column.modals.c0865f105251d35a9878.js.map